<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
	<style type="text/css">
			#cont{width: 300px;height: 400px;margin: 10px auto;border: solid 1px black;}
			#cont .msg{width: 100%;height: 340px;border-bottom: solid 1px black;box-sizing: border-box;padding: 10px;overflow: auto;}
			#cont .box{height: 100px;}
			textarea{width: 260px;height: 60px;border: none;background: none;outline: none;float: left;box-sizing: border-box;resize: none;}
			#btn{width: 40px;height: 60px;float: left;border: solid 1px #ccc;background: #ccc;box-sizing: border-box;}
			.msg div{clear: both;max-width: 200px;padding: 10px;border-radius: 12px;margin-bottom: 10px;}
			.msg div:nth-child(2n){float: left;background: limegreen;}
			.msg div:nth-child(2n-1){float: right;background: dodgerblue;}
		</style>
	</head>
	<body>
		<div id="cont">
			<div class="msg">
				
			</div>
			<div class="box">
				<textarea></textarea>
				<input type="button" id="btn" value="发送" />
			</div>
		</div>
	</body>
	<script type="text/javascript">
		onload = function(){
			var obtn = document.getElementById("btn");
			var otxt = document.querySelector("textarea");
			var omsg = document.querySelector(".msg");
			
			obtn.onclick = function(){
				fn(otxt,omsg);
			}
			
			otxt.onkeydown = function(eve){
				var e = eve || window.event;
//				console.log(e.keyCode)
				if(e.keyCode == 13 && e.ctrlKey && e.shiftKey){
					fn(otxt,omsg);
				}
			}
		}
		
		
		
		function fn(txt,msg){
			var div = document.createElement("div");
			div.innerHTML = txt.value;
			msg.appendChild(div)
			
			txt.value = "";
			
			var achild = msg.children;
			var sumH = 0;
			for(var i=0;i<achild.length;i++){
				sumH += achild[i].offsetHeight
			}
//			console.log(sumH)

			msg.scrollTop = sumH;
		}
		
	</script>
</html>
